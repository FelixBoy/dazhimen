<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dazhimen.bg.bean.News">
    <insert id="saveAddNews" parameterType="dazhimen.bg.bean.AddNewsBean">
        insert into news(nid,title,mainimgurl,listimgurl)
        values(#{nid}, #{title}, #{mainimgurl}, #{listimgurl})
    </insert>
    <insert id="saveAddNewContents" parameterType="dazhimen.bg.bean.NewsContentBean">
       insert into news_content(contentid, contenttype, contentvalue, contentsort, nid)
                      values(#{contentid},#{contenttype},#{contentvalue},#{contentsort},#{nid})
    </insert>
    <select id="getAllNewsCount" resultType="dazhimen.bg.bean.SingleValueBean">
        select count(nid) as valueinfo
        from news a
        where a.isdel = '0'
    </select>
    <select id="listAllNews" resultType="dazhimen.bg.bean.ListViewNewsBean"
            parameterType="dazhimen.bg.bean.PaginationParamBean">
       select nid,title,getcodetxt('newsstatus',a.status) status,a.status statusnum,
               date_format(a.createdatetime,'%Y-%m-%d %H:%i:%s') createdatetime
        from news a
       where a.isdel = '0'
       order by a.indexsort,createdatetime desc
       limit #{startnum},#{getrows}
    </select>
</mapper>